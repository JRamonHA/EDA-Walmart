[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "EDA Walmart",
    "section": "",
    "text": "1 Introducción\nEl presente análisis exploratorio de datos (EDA) tiene como objetivo comprender la estructura, la calidad y las principales características de los datos históricos de ventas de Walmart. Se busca describir cómo están organizados los datos, su naturaleza jerárquica, e identificar patrones, valores atípicos y posibles inconsistencias que puedan afectar su análisis.\nEl conjunto de datos está compuesto por 42,840 series temporales jerárquicas, correspondientes a registros de ventas a lo largo del tiempo organizados en distintos niveles. Los datos provienen de tres estados de Estados Unidos: California (CA), Texas (TX) y Wisconsin (WI). La naturaleza jerárquica de los datos permite su agregación a diferentes niveles, como producto, departamento, categoría o estado. El período cubierto por las ventas abarca desde enero de 2011 hasta junio de 2016, e incluye también información sobre precios, promociones y días festivos. Cabe señalar que un alto porcentaje de las series presenta periodos con valores de ventas iguales a cero.\nEn total, el conjunto de datos incluye 3,049 productos individuales, distribuidos en 3 categorías, 7 departamentos y vendidos en 10 tiendas ubicadas en los tres estados mencionados. La organización jerárquica permite generar distintas agregaciones, por ejemplo, una única serie con todas las ventas, tres series agregadas por estado, o series más específicas por combinación de producto y tienda. En su nivel más desagregado, las ventas de los 3,049 productos en las 10 tiendas conforman 30,490 series temporales individuales.\nLos datos se presentan en tres archivos separados:\n\nsales_train.csv: Son los datos principales. Contienen una columna para cada uno de los 1941 días desde el 29/01/2011 hasta el 22/05/2016; sin incluir el período de validación de 28 días hasta el 19/06/2016. También incluye los ID de artículo, departamento, categoría, tienda y estado.\ncalendar.csv: Contiene las fechas en las que se venden los productos junto con características relacionadas como día de la semana, mes, año y 3 indicadores binarios que indican si las tiendas en cada estado permitían compras con cupones de alimentos SNAP en esta fecha (1) o no (0).\nsell_prices.csv: Contiene información sobre los productos vendidos (ID de tienda, artículo, fecha y precio de venta).\n\n\n\n2 Preparación\n\nCargar libreriasCargar datos\n\n\nCarga de módulos para la manipulación de datos y visualización interactiva.\n\n\nCódigo\nimport pandas as pd\nimport numpy as np\nimport plotly.express as px\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n\n\n\nCarga de los datos utilizando pandas. Los archivos originales en formato .csv han sido previamente convertidos a .parquet para optimizar el uso de memoria y espacio en disco, mejorando la eficiencia en el manejo de grandes volúmenes de datos.\n\n\nCódigo\ncalendar = pd.read_parquet('data/calendar.parquet')\ntrain = pd.read_parquet('data/sales_train.parquet')\nprices = pd.read_parquet('data/sell_prices.parquet')\nsample_submit = pd.read_parquet('data/sample_submission.parquet')\n\n\n\n\n\n\n\n3 Estructura y contenido de los datos\nComo primer paso, es recomendable echar un vistazo rápido a los conjuntos de datos.\n\nVentasPreciosCalendarioValores faltantes y ceros\n\n\nAquí están las primeras 10 filas de los datos de ventas:\n\n\nCódigo\ntrain.head(10)\n\n\n\n\n\n\n\n\n\nid\nitem_id\ndept_id\ncat_id\nstore_id\nstate_id\nd_1\nd_2\nd_3\nd_4\n...\nd_1904\nd_1905\nd_1906\nd_1907\nd_1908\nd_1909\nd_1910\nd_1911\nd_1912\nd_1913\n\n\n\n\n0\nHOBBIES_1_001_CA_1_validation\nHOBBIES_1_001\nHOBBIES_1\nHOBBIES\nCA_1\nCA\n0\n0\n0\n0\n...\n1\n3\n0\n1\n1\n1\n3\n0\n1\n1\n\n\n1\nHOBBIES_1_002_CA_1_validation\nHOBBIES_1_002\nHOBBIES_1\nHOBBIES\nCA_1\nCA\n0\n0\n0\n0\n...\n0\n0\n0\n0\n0\n1\n0\n0\n0\n0\n\n\n2\nHOBBIES_1_003_CA_1_validation\nHOBBIES_1_003\nHOBBIES_1\nHOBBIES\nCA_1\nCA\n0\n0\n0\n0\n...\n2\n1\n2\n1\n1\n1\n0\n1\n1\n1\n\n\n3\nHOBBIES_1_004_CA_1_validation\nHOBBIES_1_004\nHOBBIES_1\nHOBBIES\nCA_1\nCA\n0\n0\n0\n0\n...\n1\n0\n5\n4\n1\n0\n1\n3\n7\n2\n\n\n4\nHOBBIES_1_005_CA_1_validation\nHOBBIES_1_005\nHOBBIES_1\nHOBBIES\nCA_1\nCA\n0\n0\n0\n0\n...\n2\n1\n1\n0\n1\n1\n2\n2\n2\n4\n\n\n5\nHOBBIES_1_006_CA_1_validation\nHOBBIES_1_006\nHOBBIES_1\nHOBBIES\nCA_1\nCA\n0\n0\n0\n0\n...\n0\n1\n0\n1\n0\n0\n0\n2\n0\n0\n\n\n6\nHOBBIES_1_007_CA_1_validation\nHOBBIES_1_007\nHOBBIES_1\nHOBBIES\nCA_1\nCA\n0\n0\n0\n0\n...\n0\n0\n0\n1\n0\n1\n0\n0\n1\n1\n\n\n7\nHOBBIES_1_008_CA_1_validation\nHOBBIES_1_008\nHOBBIES_1\nHOBBIES\nCA_1\nCA\n12\n15\n0\n0\n...\n0\n0\n1\n37\n3\n4\n6\n3\n2\n1\n\n\n8\nHOBBIES_1_009_CA_1_validation\nHOBBIES_1_009\nHOBBIES_1\nHOBBIES\nCA_1\nCA\n2\n0\n7\n3\n...\n0\n0\n1\n1\n6\n0\n0\n0\n0\n0\n\n\n9\nHOBBIES_1_010_CA_1_validation\nHOBBIES_1_010\nHOBBIES_1\nHOBBIES\nCA_1\nCA\n0\n0\n1\n0\n...\n1\n0\n0\n0\n0\n0\n0\n2\n0\n2\n\n\n\n\n10 rows × 1919 columns\n\n\n\nSe infiere que:\n\nHay una columna para cada ID de artículo, departamento, categoría, tienda y estado; además de un ID general que combina los demás ID y una marca de validación.\nLas ventas por fecha se codifican como columnas que comienzan con el prefijo d_. Estas indican el número de unidades vendidas por día (no el total de dólares).\nHay bastantes valores cero.\n\nEste conjunto de datos tiene demasiadas columnas y filas para mostrarlas todas:\n\n\nCódigo\ntrain.shape\n\n\n(30490, 1919)\n\n\n\n\nEste conjunto de datos da los cambios de precio semanales por artículo:\n\n\nCódigo\nprices.head(10)\n\n\n\n\n\n\n\n\n\nstore_id\nitem_id\nwm_yr_wk\nsell_price\n\n\n\n\n0\nCA_1\nHOBBIES_1_001\n11325\n9.58\n\n\n1\nCA_1\nHOBBIES_1_001\n11326\n9.58\n\n\n2\nCA_1\nHOBBIES_1_001\n11327\n8.26\n\n\n3\nCA_1\nHOBBIES_1_001\n11328\n8.26\n\n\n4\nCA_1\nHOBBIES_1_001\n11329\n8.26\n\n\n5\nCA_1\nHOBBIES_1_001\n11330\n8.26\n\n\n6\nCA_1\nHOBBIES_1_001\n11331\n8.26\n\n\n7\nCA_1\nHOBBIES_1_001\n11332\n8.26\n\n\n8\nCA_1\nHOBBIES_1_001\n11333\n8.26\n\n\n9\nCA_1\nHOBBIES_1_001\n11334\n8.26\n\n\n\n\n\n\n\n\n\nCódigo\n# Desactivar notación científica\npd.options.display.float_format = '{:.2f}'.format\n\nprices.describe(include='all')\n\n\n\n\n\n\n\n\n\nstore_id\nitem_id\nwm_yr_wk\nsell_price\n\n\n\n\ncount\n6841121\n6841121\n6841121.00\n6841121.00\n\n\nunique\n10\n3049\nNaN\nNaN\n\n\ntop\nTX_2\nHOUSEHOLD_2_142\nNaN\nNaN\n\n\nfreq\n701214\n2820\nNaN\nNaN\n\n\nmean\nNaN\nNaN\n11382.94\n4.41\n\n\nstd\nNaN\nNaN\n148.61\n3.41\n\n\nmin\nNaN\nNaN\n11101.00\n0.01\n\n\n25%\nNaN\nNaN\n11247.00\n2.18\n\n\n50%\nNaN\nNaN\n11411.00\n3.47\n\n\n75%\nNaN\nNaN\n11517.00\n5.84\n\n\nmax\nNaN\nNaN\n11621.00\n107.32\n\n\n\n\n\n\n\nResultados:\n\nLos precios varían desde $0.10 hasta poco más de $100.\n\n\n\nLos datos del calendario brindan características de fecha, como día de la semana, mes o año; junto con 2 características de eventos diferentes y una columna de cupones de alimentos SNAP:\n\n\nCódigo\ncalendar.head(10)\n\n\n\n\n\n\n\n\n\ndate\nwm_yr_wk\nweekday\nwday\nmonth\nyear\nd\nevent_name_1\nevent_type_1\nevent_name_2\nevent_type_2\nsnap_CA\nsnap_TX\nsnap_WI\n\n\n\n\n0\n2011-01-29\n11101\nSaturday\n1\n1\n2011\nd_1\nNone\nNone\nNone\nNone\n0\n0\n0\n\n\n1\n2011-01-30\n11101\nSunday\n2\n1\n2011\nd_2\nNone\nNone\nNone\nNone\n0\n0\n0\n\n\n2\n2011-01-31\n11101\nMonday\n3\n1\n2011\nd_3\nNone\nNone\nNone\nNone\n0\n0\n0\n\n\n3\n2011-02-01\n11101\nTuesday\n4\n2\n2011\nd_4\nNone\nNone\nNone\nNone\n1\n1\n0\n\n\n4\n2011-02-02\n11101\nWednesday\n5\n2\n2011\nd_5\nNone\nNone\nNone\nNone\n1\n0\n1\n\n\n5\n2011-02-03\n11101\nThursday\n6\n2\n2011\nd_6\nNone\nNone\nNone\nNone\n1\n1\n1\n\n\n6\n2011-02-04\n11101\nFriday\n7\n2\n2011\nd_7\nNone\nNone\nNone\nNone\n1\n0\n0\n\n\n7\n2011-02-05\n11102\nSaturday\n1\n2\n2011\nd_8\nNone\nNone\nNone\nNone\n1\n1\n1\n\n\n8\n2011-02-06\n11102\nSunday\n2\n2\n2011\nd_9\nSuperBowl\nSporting\nNone\nNone\n1\n1\n1\n\n\n9\n2011-02-07\n11102\nMonday\n3\n2\n2011\nd_10\nNone\nNone\nNone\nNone\n1\n1\n0\n\n\n\n\n\n\n\n\n\nCódigo\ncalendar.info()\n\n\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 1969 entries, 0 to 1968\nData columns (total 14 columns):\n #   Column        Non-Null Count  Dtype \n---  ------        --------------  ----- \n 0   date          1969 non-null   object\n 1   wm_yr_wk      1969 non-null   int64 \n 2   weekday       1969 non-null   object\n 3   wday          1969 non-null   int64 \n 4   month         1969 non-null   int64 \n 5   year          1969 non-null   int64 \n 6   d             1969 non-null   object\n 7   event_name_1  162 non-null    object\n 8   event_type_1  162 non-null    object\n 9   event_name_2  5 non-null      object\n 10  event_type_2  5 non-null      object\n 11  snap_CA       1969 non-null   int64 \n 12  snap_TX       1969 non-null   int64 \n 13  snap_WI       1969 non-null   int64 \ndtypes: int64(7), object(7)\nmemory usage: 215.5+ KB\n\n\n\n\nCódigo\ncalendar.describe(include='all')\n\n\n\n\n\n\n\n\n\ndate\nwm_yr_wk\nweekday\nwday\nmonth\nyear\nd\nevent_name_1\nevent_type_1\nevent_name_2\nevent_type_2\nsnap_CA\nsnap_TX\nsnap_WI\n\n\n\n\ncount\n1969\n1969.00\n1969\n1969.00\n1969.00\n1969.00\n1969\n162\n162\n5\n5\n1969.00\n1969.00\n1969.00\n\n\nunique\n1969\nNaN\n7\nNaN\nNaN\nNaN\n1969\n30\n4\n4\n2\nNaN\nNaN\nNaN\n\n\ntop\n2011-01-29\nNaN\nSaturday\nNaN\nNaN\nNaN\nd_1\nSuperBowl\nReligious\nFather's day\nCultural\nNaN\nNaN\nNaN\n\n\nfreq\n1\nNaN\n282\nNaN\nNaN\nNaN\n1\n6\n55\n2\n4\nNaN\nNaN\nNaN\n\n\nmean\nNaN\n11347.09\nNaN\n4.00\n6.33\n2013.29\nNaN\nNaN\nNaN\nNaN\nNaN\n0.33\n0.33\n0.33\n\n\nstd\nNaN\n155.28\nNaN\n2.00\n3.42\n1.58\nNaN\nNaN\nNaN\nNaN\nNaN\n0.47\n0.47\n0.47\n\n\nmin\nNaN\n11101.00\nNaN\n1.00\n1.00\n2011.00\nNaN\nNaN\nNaN\nNaN\nNaN\n0.00\n0.00\n0.00\n\n\n25%\nNaN\n11219.00\nNaN\n2.00\n3.00\n2012.00\nNaN\nNaN\nNaN\nNaN\nNaN\n0.00\n0.00\n0.00\n\n\n50%\nNaN\n11337.00\nNaN\n4.00\n6.00\n2013.00\nNaN\nNaN\nNaN\nNaN\nNaN\n0.00\n0.00\n0.00\n\n\n75%\nNaN\n11502.00\nNaN\n6.00\n9.00\n2015.00\nNaN\nNaN\nNaN\nNaN\nNaN\n1.00\n1.00\n1.00\n\n\nmax\nNaN\n11621.00\nNaN\n7.00\n12.00\n2016.00\nNaN\nNaN\nNaN\nNaN\nNaN\n1.00\n1.00\n1.00\n\n\n\n\n\n\n\nSe obtiene que:\n\nEl calendario contiene todas las fechas, días de la semana y meses relevantes, además de indicadores binarios.\nSolo hay 5 filas no NA en la columna event_name_2; es decir, solo 5 (de 1969) instancias con más de un evento en un día determinado.\n\n\n\n\n\nCódigo\ntrain.isna().sum()\n\n\nid          0\nitem_id     0\ndept_id     0\ncat_id      0\nstore_id    0\n           ..\nd_1909      0\nd_1910      0\nd_1911      0\nd_1912      0\nd_1913      0\nLength: 1919, dtype: int64\n\n\n\n\nCódigo\nfrom matplotlib.ticker import PercentFormatter\n\ndf = train.loc[:, ~train.columns.str.contains('id')]\ndf = df.replace(0, np.nan)\ndf_na = df.isna().copy()\ndf_na['sum'] = df_na.sum(axis=1)\ndf_na['mean'] = df_na['sum'] / df_na.shape[1]\nbar = df_na[['sum', 'mean']]\n\nplt.figure(figsize=(8, 6))\nsns.kdeplot(bar['mean'], fill=True, color='blue')\nplt.gca().xaxis.set_major_formatter(PercentFormatter(1))  # eje x como %\nplt.xlim(0, 1)\nplt.gca().set_yticklabels([])\nplt.title(\"Densidad del porcentaje de valores cero - todas las series temporales\")\nplt.xlabel(\"\")\nplt.ylabel(\"\")\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\nEsto significa que solo una minoría de las series temporales tienen menos del 50% de valores cero. El pico está bastante cerca del 100%."
  }
]